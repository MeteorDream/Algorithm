---
title: LeetCode 946.éªŒè¯æ ˆåºåˆ—
date: 2021-06-14 17:10:58
categories:
- [LeetCode]
tags: [LeetCode,æ ˆ]
---

## é¢˜ç›®

[946. éªŒè¯æ ˆåºåˆ—](https://leetcode-cn.com/problems/validate-stack-sequences/)

éš¾åº¦: ä¸­ç­‰

ç»™å®šÂ `pushed`Â å’ŒÂ `popped`Â ä¸¤ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—ä¸­çš„ **å€¼éƒ½ä¸é‡å¤**ï¼Œåªæœ‰å½“å®ƒä»¬å¯èƒ½æ˜¯åœ¨æœ€åˆç©ºæ ˆä¸Šè¿›è¡Œçš„æ¨å…¥ push å’Œå¼¹å‡º pop æ“ä½œåºåˆ—çš„ç»“æœæ—¶ï¼Œè¿”å› `true`ï¼›å¦åˆ™ï¼Œè¿”å› `false`Â ã€‚

$\quad$

ç¤ºä¾‹ 1ï¼š

> **è¾“å…¥ï¼š**pushed = [1,2,3,4,5], popped = [4,5,3,2,1]
> **è¾“å‡ºï¼š**true
> **è§£é‡Šï¼š**æˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š
> push(1), push(2), push(3), push(4), pop() -> 4,
> push(5), pop() -> 5, pop() -> 3, pop() -> 2, pop() -> 1

ç¤ºä¾‹ 2ï¼š

> **è¾“å…¥ï¼š**pushed = [1,2,3,4,5], popped = [4,3,5,1,2]
> **è¾“å‡ºï¼š**false
> **è§£é‡Šï¼š**1 ä¸èƒ½åœ¨ 2 ä¹‹å‰å¼¹å‡ºã€‚
> $\quad$

æç¤ºï¼š

- `0 <= pushed.length == popped.length <= 1000`
- `0 <= pushed[i], popped[i] < 1000`
- `pushed`Â æ˜¯Â `popped`Â çš„æ’åˆ—ã€‚

## è§£æ

è¿™æ˜¯é“æ¨¡æ‹Ÿé¢˜ï¼Œæˆ‘ä»¬å…ˆæƒ³æƒ³æ‰‹åŠ¨è€ƒå¯Ÿå‡ºæ ˆã€å…¥æ ˆåºåˆ—æ˜¯å¦åˆç†è¦æ€ä¹ˆåšã€‚è¿™æ˜¯æ ˆçš„åŸºæœ¬æ“ä½œäº†ï¼Œå¦‚æœä¸ä¼šåšå»ºè®®å…ˆå­¦ä¹ ä¸‹æ•°æ®ç»“æ„å…³äºæ ˆæ–¹é¢çš„å†…å®¹ã€‚

è¿™éœ€è¦ä¸€ä¸ªè®¾ç½®ä¸€ä¸ªæ ˆæ¥å®ç°å‡ºæ ˆå…¥æ ˆçš„æ“ä½œï¼Œä¸¾ä¸ªğŸŒ°

å…¥æ ˆåºåˆ—`[1,2,3,4,5]`  
å‡ºæ ˆåºåˆ—`[3,5,4,2,1]`

æˆ‘ä»¬è€ƒå¯Ÿå‡ºæ ˆåºåˆ—ï¼š

- æƒ³è¦å°†3å‡ºæ ˆï¼Œé‚£ä¹ˆ3ä»¥åŠ3ä¹‹å‰çš„å€¼éƒ½éœ€è¦å…¥æ ˆï¼Œæ­¤æ—¶æ ˆä¸­åºåˆ—ä¸º`[1,2,3]`ï¼Œå¯ä»¥å°†3å‡ºæ ˆ
- æƒ³è¦å°†5å‡ºæ ˆï¼Œé‚£ä¹ˆ5ä»¥åŠ5ä¹‹å‰çš„å€¼éƒ½éœ€è¦å…¥æ ˆï¼Œæ­¤æ—¶æ ˆä¸­åºåˆ—ä¸º`[1,2,4,5]`ï¼Œå¯ä»¥å°†5å‡ºæ ˆ
- å¯ä»¥çœ‹å‡ºï¼Œæ ˆ`[1,2,4]`çš„å‡ºæ ˆé¡ºåºæ°å¥½å°±æ˜¯`[4,2,1]`æ»¡è¶³æ‰€ç»™å‡ºæ ˆåºåˆ—ï¼Œæ‰€ä»¥è¿™ä¸ªå‡ºæ ˆé¡ºåºæ˜¯åˆç†çš„

è‹¥æˆ‘ä»¬å°†å‡ºæ ˆåºåˆ—æ”¹ä¸º`[3,5,4,1,2]`, å°±ä¼šå‘ç° 1 ä¸å¯èƒ½åœ¨ 2 ä¹‹å‰å‡ºæ ˆï¼Œæ‰€ä»¥è¿™ä¸ªåºåˆ—å°±æ˜¯ä¸åˆç†çš„

## æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ

æ¨¡æ‹Ÿçš„æ€è·¯å¾ˆç®€å•å¾ˆæ¸…æ™°ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ä¸Šè¿°æ€è·¯è½¬åŒ–ä¸ºä»£ç å®ç°

```python
# Code language: Python
class Solution:
    # æ¨¡æ‹Ÿ
    def validateStackSequences(self, pushed: List[int], popped: List[int]) -> bool:
        n = len(pushed)
        i, j = 0, 0
        st = []  # è®¾ç½®ä¸€ä¸ªæ ˆæ¨¡æ‹Ÿå‡ºæ ˆå…¥æ ˆè¡Œä¸º
        # é€ä¸ªæ£€æŸ¥èƒ½å¦å¾—åˆ°poppedå‡ºæ ˆåºåˆ—
        while j < n:
            # è‹¥æ ˆé¡¶å…ƒç´ ä¸æ˜¯å½“å‰poppedåºåˆ—æ‰€å¤„ç†çš„é‚£ä¸ªæˆ–æ ˆç©ºï¼Œé‚£å°±ä»pushedåºåˆ—å–å…ƒç´ å…¥æ ˆ
            while i < n and (not st or st[-1] != popped[j]):
                st.append(pushed[i])
                i += 1
            # å¦‚æœå‡ºæ ˆåºåˆ—ç”¨å®Œäº†éƒ½å¾—ä¸åˆ°å‡ºæ ˆåºåˆ—å…ƒç´ ï¼Œè¯´æ˜pushedçš„å…¥æ ˆé¡ºåºä¸å¯èƒ½å¾—åˆ°poppedçš„å‡ºæ ˆé¡ºåº
            if not i < n and st[-1] != popped[j]:
                return False
            while st and j < n and st[-1] == popped[j]:
                st.pop()
                j += 1
        return True
```

```cpp
/* Code language: C++ */
/* // æ¨¡æ‹Ÿ */
class Solution {
public:
    bool validateStackSequences(vector<int>& pushed, vector<int>& popped) {
        int n = pushed.size();
        // è®¾ç½®ä¸€ä¸ªæ ˆæ¨¡æ‹Ÿå‡ºæ ˆå…¥æ ˆè¡Œä¸º
        stack<int> s;
        // é€ä¸ªæ£€æŸ¥èƒ½å¦å¾—åˆ°poppedå‡ºæ ˆåºåˆ—
        for (int i = 0, j = 0; j < n;) {
            // è‹¥æ ˆé¡¶å…ƒç´ ä¸æ˜¯å½“å‰poppedåºåˆ—æ‰€å¤„ç†çš„é‚£ä¸ªæˆ–æ ˆç©ºï¼Œé‚£å°±ä»pushedåºåˆ—å–å…ƒç´ å…¥æ ˆ
            while (i < n && (s.empty() || s.top() != popped[j]))
                s.emplace(pushed[i++]);
            // å¦‚æœå‡ºæ ˆåºåˆ—ç”¨å®Œäº†éƒ½å¾—ä¸åˆ°å‡ºæ ˆåºåˆ—å…ƒç´ ï¼Œè¯´æ˜pushedçš„å…¥æ ˆé¡ºåºä¸å¯èƒ½å¾—åˆ°poppedçš„å‡ºæ ˆé¡ºåº
            if (i == n && s.top() != popped[j])
                return false;
            while (j < n && !s.empty() && s.top() == popped[j]) {
                s.pop();
                ++j;
            }
        }
        return true;
    }
};
```

```java
/* Code language: Java */
class Solution {
    /* // æ¨¡æ‹Ÿ */
    public boolean validateStackSequences(int[] pushed, int[] popped) {
        int n = pushed.length;
        // è®¾ç½®ä¸€ä¸ªæ ˆæ¨¡æ‹Ÿå‡ºæ ˆå…¥æ ˆè¡Œä¸º
        Stack<Integer> s = new Stack<>();
        // é€ä¸ªæ£€æŸ¥èƒ½å¦å¾—åˆ°poppedå‡ºæ ˆåºåˆ—
        for (int i = 0, j = 0; j < n;) {
            // è‹¥æ ˆé¡¶å…ƒç´ ä¸æ˜¯å½“å‰poppedåºåˆ—æ‰€å¤„ç†çš„é‚£ä¸ªæˆ–æ ˆç©ºï¼Œé‚£å°±ä»pushedåºåˆ—å–å…ƒç´ å…¥æ ˆ
            while (i < n && (s.empty() || s.peek() != popped[j]))
                s.push(pushed[i++]);
            // å¦‚æœå‡ºæ ˆåºåˆ—ç”¨å®Œäº†éƒ½å¾—ä¸åˆ°å‡ºæ ˆåºåˆ—å…ƒç´ ï¼Œè¯´æ˜pushedçš„å…¥æ ˆé¡ºåºä¸å¯èƒ½å¾—åˆ°poppedçš„å‡ºæ ˆé¡ºåº
            if (i == n && s.peek() != popped[j])
                return false;
            while (!s.empty() && s.peek() == popped[j]) {
                s.pop();
                ++j;
            }
        }
        return true;
    }
}
```

- æ—¶é—´å¤æ‚åº¦: $O(n)$, `pushed`å’Œ`popped`éƒ½åªéœ€éå†ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦: $O(n)$, æœ€åæƒ…å†µä¸‹æ‰€æœ‰å…ƒç´ éƒ½å…ˆå…¥æ ˆï¼Œå†é€ä¸€å‡ºæ ˆ

## æ–¹æ³•äºŒï¼šç©ºé—´ä¼˜åŒ–+æ¨¡æ‹Ÿ

æ³¨æ„åˆ° `pushed` å’Œ `popped` éƒ½åªéœ€éå†ä¸€æ¬¡ï¼Œè€Œæ¨¡æ‹Ÿæ ˆä¸­çš„å…ƒç´ éƒ½æ˜¯ `pushed` ä¸­ç”±å‰å‘åå–å¾—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† `pushed` ä¸­å·²ç»éå†è¿‡çš„éƒ¨åˆ†å½“æˆæ¨¡æ‹Ÿæ ˆï¼Œä»¥å®ç°ç©ºé—´ä¼˜åŒ–ï¼Œå…¶ä½™éƒ¨åˆ†è¿˜æ˜¯æ¨¡æ‹Ÿçš„æ€è·¯ã€‚å½“ç„¶ï¼Œç¼ºç‚¹æ˜¯ `pushed` æ•°ç»„ä¸­çš„æ•°å€¼è¢«è¦†ç›–äº†ã€‚

```python
# Code language: Python
class Solution:
    # æ¨¡æ‹Ÿ + ç©ºé—´ä¼˜åŒ–
    # æ³¨æ„åˆ°æˆ‘ä»¬è®¾ç½®ç”¨äºæ¨¡æ‹Ÿçš„æ ˆå¤§å°ä¸ä¼šè¶…å‡ºpushedçš„å¤§å°ï¼Œä¸”pushedå’Œpoppedçš„å…ƒç´ éƒ½åªéœ€éå†ä¸€æ¬¡å°±è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨pushedä¸ŠåŸåœ°è¿›è¡Œæ¨¡æ‹Ÿï¼Œå…¶ä½™æ€è·¯ä¸å˜
    def validateStackSequences(self, pushed: List[int], popped: List[int]) -> bool:
        n = len(pushed)
        i, j = 0, 0
        # pushed å·²ç»éå†è¿‡çš„ä½ç½®è®¾ç½®ä¸€ä¸ªæ¨¡æ‹Ÿæ ˆçš„æ ˆé¡¶æŒ‡é’ˆ
        s = 0
        # é€ä¸ªæ£€æŸ¥èƒ½å¦å¾—åˆ°poppedå‡ºæ ˆåºåˆ—
        while j < n:
            # è‹¥æ ˆé¡¶å…ƒç´ ä¸æ˜¯å½“å‰poppedåºåˆ—æ‰€å¤„ç†çš„é‚£ä¸ªæˆ–æ ˆç©ºï¼Œé‚£å°±ä»pushedåºåˆ—å–å…ƒç´ å…¥æ ˆ
            while i < n and (s == 0 or pushed[s - 1] != popped[j]):
                pushed[s] = pushed[i]
                s += 1
                i += 1
            # å¦‚æœå‡ºæ ˆåºåˆ—ç”¨å®Œäº†éƒ½å¾—ä¸åˆ°å‡ºæ ˆåºåˆ—å…ƒç´ ï¼Œè¯´æ˜pushedçš„å…¥æ ˆé¡ºåºä¸å¯èƒ½å¾—åˆ°poppedçš„å‡ºæ ˆé¡ºåº
            if not i < n and pushed[s - 1] != popped[j]:
                return False
            while s > 0 and j < n and pushed[s - 1] == popped[j]:
                s -= 1
                j += 1
        return True
```

```cpp
/* Code language: C++ */
/* // æ¨¡æ‹Ÿ + ç©ºé—´ä¼˜åŒ– */
class Solution {
public:
    // æ³¨æ„åˆ°æˆ‘ä»¬è®¾ç½®ç”¨äºæ¨¡æ‹Ÿçš„æ ˆå¤§å°ä¸ä¼šè¶…å‡ºpushedçš„å¤§å°ï¼Œä¸”pushedå’Œpoppedçš„å…ƒç´ éƒ½åªéœ€éå†ä¸€æ¬¡å°±è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨pushedä¸ŠåŸåœ°è¿›è¡Œæ¨¡æ‹Ÿï¼Œå…¶ä½™æ€è·¯ä¸å˜
    bool validateStackSequences(vector<int>& pushed, vector<int>& popped) {
        int n = pushed.size();
        // pushed å·²ç»éå†è¿‡çš„ä½ç½®è®¾ç½®ä¸€ä¸ªæ¨¡æ‹Ÿæ ˆçš„æ ˆé¡¶æŒ‡é’ˆ
        int s = 0;
        // é€ä¸ªæ£€æŸ¥èƒ½å¦å¾—åˆ°poppedå‡ºæ ˆåºåˆ—
        for (int i = 0, j = 0; j < n;) {
            // è‹¥æ ˆé¡¶å…ƒç´ ä¸æ˜¯å½“å‰poppedåºåˆ—æ‰€å¤„ç†çš„é‚£ä¸ªæˆ–æ ˆç©ºï¼Œé‚£å°±ä»pushedåºåˆ—å–å…ƒç´ å…¥æ ˆ
            while (i < n && (s == 0 || pushed[s - 1] != popped[j]))
                pushed[s++] = pushed[i++];
            // å¦‚æœå‡ºæ ˆåºåˆ—ç”¨å®Œäº†éƒ½å¾—ä¸åˆ°å‡ºæ ˆåºåˆ—å…ƒç´ ï¼Œè¯´æ˜pushedçš„å…¥æ ˆé¡ºåºä¸å¯èƒ½å¾—åˆ°poppedçš„å‡ºæ ˆé¡ºåº
            if (i == n && pushed[s - 1] != popped[j])
                return false;
            while (j < n && s > 0 && pushed[s - 1] == popped[j]) {
                s -= 1;
                ++j;
            }
        }
        return true;
    }
};
```

```java
/* Code language: Java */
class Solution {
    /* // æ¨¡æ‹Ÿ + ç©ºé—´å‹ç¼© */
    // æ³¨æ„åˆ°æˆ‘ä»¬è®¾ç½®ç”¨äºæ¨¡æ‹Ÿçš„æ ˆå¤§å°ä¸ä¼šè¶…å‡ºpushedçš„å¤§å°ï¼Œä¸”pushedå’Œpoppedçš„å…ƒç´ éƒ½åªéœ€éå†ä¸€æ¬¡å°±è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨pushedä¸ŠåŸåœ°è¿›è¡Œæ¨¡æ‹Ÿï¼Œå…¶ä½™æ€è·¯ä¸å˜
    public boolean validateStackSequences(int[] pushed, int[] popped) {
        int n = pushed.length;
        // pushed å·²ç»éå†è¿‡çš„ä½ç½®è®¾ç½®ä¸€ä¸ªæ¨¡æ‹Ÿæ ˆçš„æ ˆé¡¶æŒ‡é’ˆ
        int s = 0;
        // é€ä¸ªæ£€æŸ¥èƒ½å¦å¾—åˆ°poppedå‡ºæ ˆåºåˆ—
        for (int i = 0, j = 0; j < n;) {
            // è‹¥æ ˆé¡¶å…ƒç´ ä¸æ˜¯å½“å‰poppedåºåˆ—æ‰€å¤„ç†çš„é‚£ä¸ªæˆ–æ ˆç©ºï¼Œé‚£å°±ä»pushedåºåˆ—å–å…ƒç´ å…¥æ ˆ
            while (i < n && (s == 0 || pushed[s - 1] != popped[j]))
                pushed[s++] = pushed[i++];
            // å¦‚æœå‡ºæ ˆåºåˆ—ç”¨å®Œäº†éƒ½å¾—ä¸åˆ°å‡ºæ ˆåºåˆ—å…ƒç´ ï¼Œè¯´æ˜pushedçš„å…¥æ ˆé¡ºåºä¸å¯èƒ½å¾—åˆ°poppedçš„å‡ºæ ˆé¡ºåº
            if (i == n && pushed[s - 1] != popped[j])
                return false;
            while (s > 0 && pushed[s - 1] == popped[j]) {
                --s;
                ++j;
            }
        }
        return true;
    }
}
```

- æ—¶é—´å¤æ‚åº¦: $O(n)$, `pushed`å’Œ`popped`éƒ½åªéœ€éå†ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦: $O(1)$
